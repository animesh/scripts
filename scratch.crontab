00 * * * * flock -w 0 $HOME/cron.lock $HOME/scripts/dataRaw.sh 0> dataRaw.0.log 1>dataRaw.1.log 2>dataRaw.2.log > dataRaw.log
#sudo mount -t cifs //it-promecfarm01.win.ntnu.no/promec $HOME/promec/ -o username="animeshs",domain="WIN-NTNU-NO",sec=ntlmssp,noperm
#sudo mount -t cifs //felles.ansatt.ntnu.no/ntnu $HOME/felles -o username="animeshs",domain="WIN-NTNU-NO",sec=ntlmssp,noperm
30 * * * * find /home/animeshs/promec/promec/TIMSTOF/ /home/animeshs/promec/promec/Qexactive/ -type d \( -name 'txt*' -o -name 'DIANN*' \) -exec bash -c 'for src in "/home/animeshs/promec/promec/TIMSTOF/" "/home/animeshs/promec/promec/Qexactive/"; do if [[ "$1" == "$src"* ]]; then dest="/home/animeshs/felles/mh/ikom/0_personal_folders/Ani/$(realpath --relative-to="$src" "$1")"; if [ -d "$dest" ] && [ "$(ls -A "$dest" 2>/dev/null)" ]; then needs_copy=0; if [ "$1" -nt "$dest" ]; then needs_copy=1; else while IFS= read -r -d "" file; do rel_file="${file#$1/}"; dest_file="$dest/$rel_file"; if [ ! -e "$dest_file" ] || [ "$file" -nt "$dest_file" ]; then needs_copy=1; break; fi; done < <(find "$1" -type f -print0); fi; if [ $needs_copy -eq 1 ]; then echo "Copying (source is newer or has new files): $1 -> $dest"; rm -rf "$dest"; cp -r "$1" "$dest"; fi; else mkdir -p "$(dirname "$dest")"; echo "Copying: $1 -> $dest"; cp -r "$1" "$dest"; fi; break; fi; done' _ {} \; > resultsRaw.log
05 * * * * flock -w 0 $HOME/cron.lock -c 'eval $(ssh-agent);ssh-add;rclone copy -Pv promec/promec/Qexactive/Raw/ NS9036K:DL/orbitrap/ 0> dataRawQE.0.log 1>dataRawQE.1.log 2>dataRawQE.2.log > dataRawQE.log;rm $HOME/cron.lock;rm $HOME/cron.lock'
20 * * * * flock -w 0 $HOME/cron.lock -c 'eval $(ssh-agent);ssh-add;rclone copy -Pv promec/promec/TIMSTOF/Raw/ NS9036K:DL/Raw/ 0> dataRawTT.0.log 1>dataRawTT.1.log 2>dataRawTT.2.log > dataRawTT.log;rm $HOME/cron.lock'
59 06,18 * * * flock -w 0 $HOME/cron.lock -c 'eval $(ssh-agent);ssh-add;rclone copy -Pv promec/promec NS9036K:PD  0> dataRawPD.0.log 1>dataRawPD.1.log 2>dataRawPD.2.log > dataRawPD.log;rm $HOME/cron.lock'

